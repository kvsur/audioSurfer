!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],s=Object.keys(a),c=0;c<s.length;++c){var f=s[c],u=a[f];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:f}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n="string"==typeof e?e:String(e);if("iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",a=0;a<n.length;++a){var s=n.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?o+=n.charAt(a):s<128?o+=i[s]:s<2048?o+=i[192|s>>6]+i[128|63&s]:s<55296||s>=57344?o+=i[224|s>>12]+i[128|s>>6&63]+i[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&n.charCodeAt(a)),o+=i[240|s>>18]+i[128|s>>12&63]+i[128|s>>6&63]+i[128|63&s])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return o(t)&&!o(r)&&(s=a(t,i)),o(t)&&o(r)?(r.forEach(function(r,o){if(n.call(t,o)){var a=t[o];a&&"object"==typeof a&&r&&"object"==typeof r?t[o]=e(a,r,i):t.push(r)}else t[o]=r}),t):Object.keys(r).reduce(function(t,o){var a=r[o];return n.call(t,o)?t[o]=e(t[o],a,i):t[o]=a,t},s)}}},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){"use strict";var n=r(4),o=r(5),i=r(1);e.exports={formats:i,parse:o,stringify:n}},function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n,o,i,a,s=function(){},c=function(){function e(){this.eventMap={}}return e.prototype.addListener=function(e,t){(this.eventMap[e]=this.eventMap[e]||[]).push(t)},e.prototype.removeListeners=function(e){delete this.eventMap[e]},e.prototype.removeListener=function(e,t){var r=this.eventMap[e];if(r)if(r.length){var n=r.indexOf(t);-1<n&&r.splice(n,1)}else delete this.eventMap[e]},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];(this.eventMap[e]||[]).slice().forEach(function(e){try{e.apply(void 0,t)}catch(e){console.error(e)}})},e}(),f=function(){function e(){this.triggerProcess={},this.listeners=new c}return e.prototype.addListener=function(e,t){document.body.click,this.listeners.addListener(e,t)},e.prototype.removeListener=function(e,t){this.listeners.removeListener(e,t)},e.prototype.removeListeners=function(e){this.listeners.removeListeners(e)},e.prototype.trigger=function(e,t){var r=this.triggerProcess[e];r?this.listeners.emit(e,r(t)):console.warn("Trigger Error. you must setTriggerProcesser for [ "+e+" ].")},e.prototype.setTriggerProcesser=function(e,t){this.triggerProcess[e]=t},e.prototype.clearListener=function(){this.listeners=new c},e}(),u=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(){var t=e.call(this)||this;return t.setTriggerProcesser("process",function(e){return e}),t.setTriggerProcesser("waitting",function(){}),t.setTriggerProcesser("complete",function(){}),t.setTriggerProcesser("abort",function(){}),t.setTriggerProcesser("error",function(e){return e}),t.addListener("process",function(e){return t.onprocess(e)}),t.addListener("waitting",function(){return t.onwaitting()}),t.addListener("complete",function(){return t.oncomplete()}),t.addListener("abort",function(){return t.onabort()}),t.addListener("error",function(e){return t.onerror(e)}),t}return u(t,e),t.prototype.decode=function(e){this.dataBufferCache=[],this.dataBufferRangeList=[];var t=this.getWavInfo(e),r=t.sampleRate,n=t.numOfChannels,o=t.headBuffer,i=t.dataBuffer,a=t.totalDataByteLength,s=t.bitsPerSample,c=t.ByteRate,f=t.duration;this.perDataBufferPiceLength=1*r*n*s/8,this.ByteRate=c,this.duration=f;var u=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(!u)throw this.onerror(new Error("Not Suport Error")),"Not Suport Error";this.audioContext=new u(1,this.perDataBufferPiceLength,44100),this.totalDataBufferLength=a,this.headerBuffer=o,this.decodedDataByteLength=0,this.lastCacheIndex=0,this.cachedDataByteLength=0,this.cacheOffset=0,this.cacheDataBufferList(i),this.decodeBufferPice(),this.decode=function(){}},t.prototype.appendBuffer=function(e){var t=this.cachedDataByteLength>=this.totalDataBufferLength,r=!this.dataBufferRangeList.length;this.cacheDataBufferList(e),!t&&r&&this.decodeBufferPice()},t.prototype.abort=function(){this.trigger("abort"),this.release()},t.prototype.release=function(){this.dataBufferCache=[],this.dataBufferRangeList=[],this.perDataBufferPiceLength=0,this.ByteRate=0,this.duration=0,this.totalDataBufferLength=0,this.headerBuffer=new ArrayBuffer(0),this.decodedDataByteLength=0,this.lastCacheIndex=0,this.cachedDataByteLength=0,this.cacheOffset=0,this.decodeBufferPice=function(){},this.appendBuffer=function(){},this.removeListeners("process"),this.removeListeners("waitting"),this.removeListeners("complete")},t.prototype.cacheDataBufferList=function(e){this.dataBufferCache.push(e);var t=this.dataBufferCache.length-1,r=0;if(this.tempBufferRange){var n=this.totalDataBufferLength-this.cachedDataByteLength,o=this.perDataBufferPiceLength-this.tempBufferRange.length;o=o<=n?o:n,e.byteLength>=o?(this.tempBufferRange.segments.push({cacheIndex:t,offset:r,length:o,cacheOffset:this.cacheOffset}),this.tempBufferRange.length+=o,this.cachedDataByteLength+=o,r+=o,this.dataBufferRangeList.push(this.tempBufferRange),this.tempBufferRange=new s):(this.tempBufferRange.segments.push({cacheIndex:t,offset:r,length:e.byteLength,cacheOffset:this.cacheOffset}),this.tempBufferRange.length+=e.byteLength,this.cachedDataByteLength+=e.byteLength,r+=e.byteLength)}for(var i=Math.floor((e.byteLength-r)/this.perDataBufferPiceLength),a=0;a<i;a++)this.dataBufferRangeList.push({segments:[{cacheIndex:t,offset:r,length:this.perDataBufferPiceLength,cacheOffset:this.cacheOffset}],length:this.perDataBufferPiceLength}),r+=this.perDataBufferPiceLength,this.cachedDataByteLength+=this.perDataBufferPiceLength;var c=e.byteLength-r;if(c)if(this.cachedDataByteLength+c>=this.totalDataBufferLength){var f=this.totalDataBufferLength-this.cachedDataByteLength;this.dataBufferRangeList.push({segments:[{cacheIndex:t,offset:r,length:f,cacheOffset:this.cacheOffset}],length:f}),this.cachedDataByteLength=this.totalDataBufferLength}else{var u=e.byteLength-r;this.tempBufferRange={segments:[{cacheIndex:t,offset:r,length:u,cacheOffset:this.cacheOffset}],length:u},this.cachedDataByteLength+=u}},t.prototype.decodeBufferPice=function(){var e=this,t=this.dataBufferRangeList.shift();if(t){var r=this.getRangeAuidoBuffer(t);this.audioContext.decodeAudioData(r,function(r){var n=e.decodedDataByteLength/e.ByteRate;e.decodedDataByteLength+=t.length;var o=e.decodedDataByteLength>=e.totalDataBufferLength;o||e.decodeBufferPice(),e.trigger("process",{audioBuffer:r,startTime:n,endTime:e.decodedDataByteLength/e.ByteRate,duration:e.duration}),o&&(e.dataBufferCache=[],e.trigger("complete"),e.release())},function(t){return e.trigger("error",new Error("Format Error"))})}else this.trigger("waitting")},t.prototype.getRangeAuidoBuffer=function(e){var t=this,r=e.segments,n=e.length,o=new ArrayBuffer(this.headerBuffer.byteLength+n),i=new Uint8Array(o),a=0;this.setWavHeadDataLength(n);var s=new Uint8Array(this.headerBuffer);return i.set(s),a+=this.headerBuffer.byteLength,r.forEach(function(e){var r=e.cacheIndex,n=e.offset,o=e.length,s=e.cacheOffset;r-s!==t.lastCacheIndex&&(t.dataBufferCache.shift(),t.cacheOffset--,t.lastCacheIndex=r-s);var c=r+t.cacheOffset-s,f=t.dataBufferCache[c],u=new Uint8Array(f,n,o);i.set(u,a),a+=o}),o},t.prototype.setWavHeadDataLength=function(e){new DataView(this.headerBuffer).setUint32(this.dataLengthOffset,e,!0)},t.prototype.getWavInfo=function(e){var t=new DataView(e),r=this.getString(t,0,4),n=this.getString(t,8,4);if("RIFF"!==r||"WAVE"!==n)throw this.trigger("error",new Error("Format Error.")),"Format Error";this.dataLengthOffset=this.getDataOffset(t);var o=t.getUint32(this.dataLengthOffset,!0),i=t.getUint16(22,!0),a=t.getUint32(24,!0),s=t.getUint32(28,!0);return{bitsPerSample:t.getUint16(34,!0),sampleRate:a,numOfChannels:i,headBuffer:e.slice(0,this.dataLengthOffset+4),dataBuffer:e.slice(this.dataLengthOffset+4,this.dataLengthOffset+4+o),totalDataByteLength:o,ByteRate:s,duration:o/s}},t.prototype.getDataOffset=function(e){for(var t=20+e.getUint32(16,!0);;){if("data"===this.getString(e,t,4))return 4+t;t+=e.getUint32(t+4,!0)+4+4}},t.prototype.getString=function(e,t,r){for(var n="",o=0;o<r;o++)n+=String.fromCharCode(e.getUint8(t+o));return n},t.prototype.onprocess=function(e){},t.prototype.onwaitting=function(){},t.prototype.oncomplete=function(){},t.prototype.onabort=function(){},t.prototype.onerror=function(e){console.error(e)},t}(f),h=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),p=function(e){function t(){return e.call(this)||this}return h(t,e),t}(f),d=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.init=function(e,t){var r=(t||{color:"black"}).color;this.canvas=document.createElement("canvas");var n=this.canvas.getContext("2d");n?(this.context=n,this.canvas.width=devicePixelRatio*Math.max(window.screen.width,window.screen.height),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.height=e.clientHeight,this.halfHeight=.5*this.canvas.height,this.color=r||"black",this.reset(),e.appendChild(this.canvas)):console.warn("cont get Context2D from canvas")},t.prototype.setColor=function(){var e,t=this;this.color instanceof Array?(e=this.context.createLinearGradient(0,this.halfHeight,this.canvas.width,this.halfHeight),this.color.forEach(function(r,n){if("string"==typeof r)e.addColorStop(n/(t.color.length-1),r);else{var o=r.offset,i=r.value;e.addColorStop(o,i)}})):e=this.color,this.context.strokeStyle=e},t.prototype.reset=function(){this.setColor()},t.prototype.render=function(e,t,r){for(var n=this,o=[],i=0;i<e.numberOfChannels;i++)o.push(e.getChannelData(i));var a=Math.floor(this.canvas.width*t),s=Math.floor(this.canvas.width*r)-a||10,c=Math.floor(o[0].length/s)||1;this.context.beginPath(),this.context.lineWidth=.5;var f=function(e){var t=a+e,r=Math.floor(c*e),i=Math.max.apply(Math,[.7].concat(o.map(function(e){return Math.abs(n.halfHeight*e[r])})));u.context.moveTo(t,u.halfHeight+i),u.context.lineTo(t,u.halfHeight-i)},u=this;for(i=0;i<=s;i+=.25)f(i);this.context.stroke()},t.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t}(p),y=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),v=function(e){function t(){var t=e.call(this)||this;return t.scaleX=1,t.scaleDelta=1,t.pointArray=new Array,t.offsetPercent=0,t.svgListener=function(e,r){for(var n=0;n<e.length;n++){var o=e[n];if(t.container===o.target){console.log(e);break}}},t.wheelProcesser=function(e){var r=e.viewPercent,n=e.event,o=e.isScale;if(n instanceof WheelEvent){n.returnValue=!1;var i=t.getBoddyLeftOffset(n.target),a=t.getBoddyLeftOffset(t.svg);o=n.deltaY<0,r=(n.clientX+i-a)/t.svg.clientWidth}if(!r)throw"Wheel Event Error: you must has a  viewPercent or event attribuite";var s=r*t.container.clientWidth/t.pointArray.length,c=t.offsetPercent+s,f=s+t.offsetPercent;return{endPercent:f+2*s,startPercent:f,totalPercent:c,isScale:o||!1}},t.onWheel=function(e){var r=e.startPercent,n=(e.endPercent,e.totalPercent,e.isScale);t.scaleX+=n?t.scaleDelta:-t.scaleDelta,t.scaleX=Math.max(t.scaleDelta,t.scaleX),t.offsetPercent=r,t.draw()},t.setTriggerProcesser("wheel",t.wheelProcesser),t.addListener("wheel",t.onWheel),t}return y(t,e),t.prototype.init=function(e,t){var r=this;this.container=e,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.width="100%",this.clientWidth=e.clientWidth,this.svg.style.height=e.clientHeight+"px",this.halfHeight=.5*e.clientHeight,this.setColor(t||{}),e.appendChild(this.svg),this.svg.addEventListener("wheel",function(e){return r.trigger("wheel",{event:e})}),new MutationObserver(this.svgListener).observe(e,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0})},t.prototype.getPoints=function(){for(var e="",t=Math.floor(this.offsetPercent*this.pointArray.length),r=.1/devicePixelRatio,n=0;n<this.clientWidth;n+=r){var o=Math.ceil(n/this.scaleX+t);e+=n+","+this.pointArray[o]+" "}return e},t.prototype.setColor=function(e){var t=e.color;if(t instanceof Array){var r='<linearGradient id="wave_rolling_color" x1="0%" y1="0%" x2="100%" y2="0%">\n                    '+t.map(function(e,r){return"string"==typeof e?'<stop offset="'+(100*r/t.length-1)+'%" style="stop-color:'+e+';stop-opacity:1"/>':'<stop offset="'+100*e.offset+'%" style="stop-color:'+e.value+';stop-opacity:1"/>'}).join("\n")+"\n                </linearGradient>",n=document.createElementNS("http://www.w3.org/2000/svg","defs");n.innerHTML=r,this.svg.appendChild(n),this.color="url(#wave_rolling_color)"}else this.color=t||"black"},t.prototype.draw=function(){var e=this.svg.querySelector("#waverolling_line");e||((e=document.createElementNS("http://www.w3.org/2000/svg","polyline")).id="waverolling_line",e.setAttribute("style","stroke-width:"+1/devicePixelRatio+"; stroke: "+this.color+";"),this.svg.appendChild(e)),e.setAttribute("points",this.getPoints())},t.prototype.reset=function(){this.scaleX=1,this.scaleDelta=1,this.pointArray=new Array,this.render=this.firstRender},t.prototype.render=function(e,t,r){this.firstRender(e,t,r)},t.prototype.firstRender=function(e,t,r){var n=e.length/r-t;this.scaleX=this.clientWidth/n,this.scaleDelta=this.scaleX,this.afterRender(e,t,r),this.render=this.afterRender},t.prototype.afterRender=function(e,t,r){for(var n=e.getChannelData(0),o=0;o<n.length;o++)this.pointArray.push(this.halfHeight+this.halfHeight*n[o]);this.draw()},t.prototype.getBoddyLeftOffset=function(e){for(var t=0;e!==document.body;)e instanceof HTMLElement&&(t+=e.offsetLeft||0),e=e.parentElement||document.body;return t},t.prototype.clear=function(){},t}(p);function m(e,t,r){return e.forEach(function(e,n){var o=r?r+"["+n+"]":""+n;e instanceof Array?t=m(e,t,o):e instanceof Object?t=b(e,t,o):t+=t?"&"+o+"="+e:o+"="+e}),t}function b(e,t,r){for(var n in e){var o=e[n],i=r?r+"["+n+"]":""+n;o instanceof Array?t=m(o,t,i):o instanceof Object?t=b(o,t,i):t+=t?"&"+i+"="+o:i+"="+o}return t}var w,O,L=(w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),P=function(){return(P=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_={Decorder:l,Render:g,HDRender:v,DataTransformer:function(e,t,r){var n,o;return e=e||"",t="GET"===(r=r||"GET")?(e=e+"?"+(t=t instanceof FormData?null:(o="",(n=t)instanceof Array?o=m(n,o,""):n instanceof Object&&(o=b(n,o,"")),o)),null):t instanceof FormData?t:JSON.stringify(t),fetch,{url:e,fetchOptions:{body:t,method:r,credentials:"same-origin"}}}},B=function(e){function t(){var t=e.call(this)||this;return t.setTriggerProcesser("error",function(e){return e}),t.setTriggerProcesser("abort",function(){return null}),t.setTriggerProcesser("click",function(e){return{totalPercent:e.viewPercent||0}}),t.setTriggerProcesser("wheel",function(e){return{totalPercent:e.viewPercent||0,startPercent:0,endPercent:1,isScale:!0}}),t}return L(t,e),t.use=function(e){var t=Object.keys(e||{}).filter(function(e){return!_[e]});if(t.length)throw"[ "+t.join(" , ")+" ] is not support.";_=P({},_,e)},t.plugins=function(){return P({},_)},t.prototype.init=function(e,t){this.plugins=P({},_);var r=t||{color:"",scalable:!1},n=r.color,o=r.scalable;this.render=o?new this.plugins.HDRender:new this.plugins.Render,this.render.init(e,{color:n})},t}(f),D=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),j=function(){return(j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},C=function(e){function t(){var t=e.call(this)||this;return t.processError=function(e){"AbortError"!==e.name?console.error(e.name):console.warn("WaveRolling load canceld.")},t}return D(t,e),t.create=function(e,t){if(e instanceof HTMLElement){var r=new this;return r.init(e,t),r}throw"Type ERROR: container "+e+" must be HTMLElement!"},t.prototype.load=function(e,t){var r=this.createDecoder(),n=t||{data:null,method:null},o=n.data,i=n.method;this.loadAudio(r,e||"",o,i||"GET")},t.prototype.loadBlob=function(e){var t=this.createDecoder();t.decode(e),this.append=function(e){e&&t.appendBuffer(e)}},t.prototype.createDecoder=function(){var e=this;if(this.decoder&&this.decoder.abort(),this.plugins.Decorder)return this.decoder=new this.plugins.Decorder,this.render.clear(),this.render.reset(),this.decoder.onprocess=function(t){var r=t.audioBuffer,n=t.startTime,o=t.endTime,i=t.duration;e.render.render(r,n/i,o/i)},this.decoder.onerror=function(t){e.onerror(t),e.trigger("error",t)},this.decoder;throw"Decorder can not be "+this.decoder+"."},t.prototype.append=function(e){},t.prototype.abort=function(){this.decoder&&this.decoder.abort(),this.trigger("abort"),this.onabort()},t.prototype.onerror=function(e){console.error(e)},t.prototype.onabort=function(){},t.prototype.loadAudio=function(e,t,r,n){var o=this,i=window.AbortController&&new AbortController||{signal:null,abort:function(){}},a=i.signal;if(!this.plugins.DataTransformer)throw"DataTransformer Can not be "+this.plugins.DataTransformer;var s=this.plugins.DataTransformer(t,r,n),c=s.url,f=s.fetchOptions,u=j({signal:a,method:n},f);e.addListener("abort",function(){i.abort()}),fetch(c,u).then(function(t){if(t.ok){var r=t.body;if(r){var n=r.getReader();e.addListener("abort",function(){n.cancel().catch(o.processError)});var i=function(){return n.read().then(function(t){if(!t.done){var r=new ArrayBuffer(t.value.length);new Uint8Array(r).set(t.value),e.appendBuffer(r),i()}}).catch(o.processError)};n.read().then(function(t){var r=new ArrayBuffer(t.value.length);new Uint8Array(r).set(t.value),e.decode(r),i()})}else console.warn("no response body.")}else o.onerror(new Error("Request Error:  "+t.status+", url is [ "+c+" ]."))}).catch(this.processError)},t}(B);r.d(t,"WaveRolling",function(){return C})}])},function(e,t,r){"use strict";var n=r(0),o=r(1),i=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Array.isArray,c=Array.prototype.push,f=function(e,t){c.apply(e,s(t)?t:[t])},u=Date.prototype.toISOString,l={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,formatter:o.formatters[o.default],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},h=function e(t,r,o,i,a,c,u,h,p,d,g,y,v){var m=t;if("function"==typeof u?m=u(r,m):m instanceof Date?m=d(m):"comma"===o&&s(m)&&(m=m.join(",")),null===m){if(i)return c&&!y?c(r,l.encoder,v):r;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||n.isBuffer(m))return c?[g(y?r:c(r,l.encoder,v))+"="+g(c(m,l.encoder,v))]:[g(r)+"="+g(String(m))];var b,w=[];if(void 0===m)return w;if(s(u))b=u;else{var O=Object.keys(m);b=h?O.sort(h):O}for(var L=0;L<b.length;++L){var P=b[L];a&&null===m[P]||(s(m)?f(w,e(m[P],"function"==typeof o?o(r,P):r,o,i,a,c,u,h,p,d,g,y,v)):f(w,e(m[P],r+(p?"."+P:"["+P+"]"),o,i,a,c,u,h,p,d,g,y,v)))}return w};e.exports=function(e,t){var r,n=e,c=function(e){if(!e)return l;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||l.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!i.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],a=l.filter;return("function"==typeof e.filter||s(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:l.addQueryPrefix,allowDots:void 0===e.allowDots?l.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:l.charsetSentinel,delimiter:void 0===e.delimiter?l.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:l.encode,encoder:"function"==typeof e.encoder?e.encoder:l.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:l.encodeValuesOnly,filter:a,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:l.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:l.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:l.strictNullHandling}}(t);"function"==typeof c.filter?n=(0,c.filter)("",n):s(c.filter)&&(r=c.filter);var u,p=[];if("object"!=typeof n||null===n)return"";u=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var d=a[u];r||(r=Object.keys(n)),c.sort&&r.sort(c.sort);for(var g=0;g<r.length;++g){var y=r[g];c.skipNulls&&null===n[y]||f(p,h(n[y],y,d,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var v=p.join(c.delimiter),m=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),v.length>0?m+v:""}},function(e,t,r){"use strict";var n=r(0),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},s=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(n),s=a?n.slice(0,a.index):n,c=[];if(s){if(!r.plainObjects&&o.call(Object.prototype,s)&&!r.allowPrototypes)return;c.push(s)}for(var f=0;null!==(a=i.exec(n))&&f<r.depth;){if(f+=1,!r.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+n.slice(a.index)+"]"),function(e,t,r){for(var n=t,o=e.length-1;o>=0;--o){var i,a=e[o];if("[]"===a&&r.parseArrays)i=[].concat(n);else{i=r.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(s,10);r.parseArrays||""!==s?!isNaN(c)&&a!==s&&String(c)===s&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(i=[])[c]=n:i[s]=n:i={0:n}}n=i}return n}(c,t,r)}};e.exports=function(e,t){var r=function(e){if(!e)return i;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?i.charset:e.charset;return{allowDots:void 0===e.allowDots?i.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth?e.depth:i.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var r,s={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,u=c.split(t.delimiter,f),l=-1,h=t.charset;if(t.charsetSentinel)for(r=0;r<u.length;++r)0===u[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===u[r]?h="utf-8":"utf8=%26%2310003%3B"===u[r]&&(h="iso-8859-1"),l=r,r=u.length);for(r=0;r<u.length;++r)if(r!==l){var p,d,g=u[r],y=g.indexOf("]="),v=-1===y?g.indexOf("="):y+1;-1===v?(p=t.decoder(g,i.decoder,h),d=t.strictNullHandling?null:""):(p=t.decoder(g.slice(0,v),i.decoder,h),d=t.decoder(g.slice(v+1),i.decoder,h)),d&&t.interpretNumericEntities&&"iso-8859-1"===h&&(d=a(d)),d&&t.comma&&d.indexOf(",")>-1&&(d=d.split(",")),o.call(s,p)?s[p]=n.combine(s[p],d):s[p]=d}return s}(e,r):e,f=r.plainObjects?Object.create(null):{},u=Object.keys(c),l=0;l<u.length;++l){var h=u[l],p=s(h,c[h],r);f=n.merge(f,p,r)}return n.compact(f)}},function(e,t,r){"use strict";r.r(t);var n=r(2);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}({},{pointerColor:"#ff6666",progressColor:"rgba(160, 160, 160, .5)",onWrapperProgress:function(){}},r),this.wrapper=t.querySelector("#audioSurferWrapper"),this.wrapper?this.innerWrapper=this.wrapper.querySelector("#audioSurferInnerWrapper"):this._createWrapper(t)}var t,r,n;return t=e,(r=[{key:"_createWrapper",value:function(e){var t=this,r=this.options,n=r.progressColor,o=r.pointerColor,i=document.createElement("div");i.addEventListener("click",function(e){t._dealInnerProgress(e)}),i.id="audioSurferWrapper",i.style.cssText="position: absolute;width: 100%;height: 100%;top: 0;background-color: transparent;cursor: pointer;";var a=document.createElement("div");a.id="audioSurferInnerWrapper",a.style.cssText="height: 100%;width: 0%;background-color: ".concat(n,";border-right: 1px solid ").concat(o,";transition: width .5s;"),i.appendChild(a),this.wrapper=i,this.innerWrapper=a,e.appendChild(this.wrapper)}},{key:"dealProgress",value:function(e){var t=e.percent;if(!this.innerWrapper)throw new Error("Wrapper do not created");this.innerWrapper.style.width="".concat(t)}},{key:"_dealInnerProgress",value:function(e){var t=this.wrapper.getBoundingClientRect().left,r=+window.getComputedStyle(this.wrapper).width.split("px")[0],n=(e.pageX-t)/r,o=this.options.onWrapperProgress;o&&o({progress:n})}}])&&i(t.prototype,r),n&&i(t,n),e}(),s=r(3);function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u(e,t,r[t])})}return e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"AudioSurfer",function(){return l});var l=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"progressTimer",null),u(this,"_defaultOptions",{color:"#1890ff",height:90,showLog:!1,onCanplay:function(){},onPlaying:function(){},onPause:function(){},onEnded:function(){},onError:function(){}}),u(this,"_state",{isplaying:!1,canplay:!1,duration:0}),u(this,"_dealProgress",function(){var e=n._state.duration,t=n.getCurrentTime(),r="".concat((t/e*100).toFixed(4),"%");n.audioWrapper.dealProgress({percent:r}),n.showLog&&n._showLog("_dealProgress",{percent:r})}),u(this,"_onCanplay",function(){var e=n.options.onCanplay;n._setState({canplay:!0}),n.getDuration(),e()}),u(this,"_onPlaying",function(){clearInterval(n.progressTimer),n.progressTimer=setInterval(n._dealProgress,500);var e=n.options.onPlaying;n._setState({isplaying:!0}),e()}),u(this,"_onPause",function(){clearInterval(n.progressTimer);var e=n.options.onPause;n._setState({isplaying:!1}),e()}),u(this,"_onEnded",function(){var e=n.options.onEnded;n._setState({isplaying:!1}),e()}),u(this,"_onError",function(e){var t=n.options.onError;n._setState({canplay:!1,isplaying:!1}),t(e)}),this.options=c({},this._defaultOptions,r);var o=this.options.height;this.showLog=this.options.showLog;var i=document.createElement("div");i.style.cssText="position: relative; width: 100%; height: ".concat(o,"px;"),t.appendChild(i),this._init(i)}var t,r,o;return t=e,(r=[{key:"_init",value:function(e){var t=this;this.waveVisual=s.WaveRolling.create(e,c({},this.options)),this.audioWrapper=new a(e,c({},this.options,{onWrapperProgress:function(e){var r=e.progress;t._onWrapperProgress(r)}})),this.audioContainer=new Audio,this.audioContainer.addEventListener("canplay",this._onCanplay),this.audioContainer.addEventListener("playing",this._onPlaying),this.audioContainer.addEventListener("pause",this._onPause),this.audioContainer.addEventListener("ended",this._onEnded),this.audioContainer.addEventListener("error",this._onError)}},{key:"_setState",value:function(e){this._state=c({},this._state,e)}},{key:"_showLog",value:function(e,t){console.log("method: ".concat(e),"params: ".concat(t))}},{key:"_onWrapperProgress",value:function(e){var t=+(this._state.duration*e).toFixed(2);this.play2time(t),this.showLog&&this._showLog("_onWrapperProgress",{progress:e})}},{key:"canPlay",value:function(){return this._state.canplay}},{key:"isPlaying",value:function(){return this._state.isplaying}},{key:"play",value:function(){this._setState({isplaying:!0}),this.audioContainer.play()}},{key:"play2time",value:function(e){var t=this._state.duration,r=e;r=r>t&&t||r,this._setState({canplay:!1,isplaying:!1}),this.audioContainer.currentTime=e,this._dealProgress(),this.showLog&&this._showLog("play2time",{time:e})}},{key:"pause",value:function(){this._setState({isplaying:!1}),this.audioContainer.pause()}},{key:"setVolume",value:function(e){this.audioContainer.volume=e}},{key:"getVolume",value:function(){return this.audioContainer.volume}},{key:"getCurrentTime",value:function(){return this.audioContainer.currentTime}},{key:"getDuration",value:function(){var e=this.audioContainer.duration;return this._setState({duration:e}),e}},{key:"load",value:function(e,t){this.showLog&&this._showLog("load",{url:e,params:t});var r=e;t&&(r+="?".concat(Object(n.stringify)(t))),this.audioContainer.src=r,this.audioContainer.load(r),this.waveVisual.load(e,{method:"GET",data:c({},t)})}},{key:"loadBuffer",value:function(e){var t=this;if(this.showLog&&this._showLog("loadBuffer",{buffer:e}),e&&!(!e instanceof ArrayBuffer)){var r=new Blob([e]),n=new FileReader;n.onload=function(){t.audioContainer.src=n.result,t.audioContainer.load(),t.waveVisual.load(e)},n.readAsDataURL(r)}}},{key:"destroy",value:function(){this.waveVisual.abort(),this.audioContainer.removeEventListener("canplay",this.onCanplay),this.audioContainer.removeEventListener("playing",this.onPlaying),this.audioContainer.removeEventListener("pause",this.onPause),this.audioContainer.removeEventListener("ended",this.onEnded),this.audioContainer.removeEventListener("error",this.onError),this.audioContainer.src="",this.showLog&&this._showLog("destroy",{audioContainer:this.audioContainer})}}])&&f(t.prototype,r),o&&f(t,o),e}()}])});